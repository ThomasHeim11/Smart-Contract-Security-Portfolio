{"abi":[{"type":"event","name":"ConfigChanged","inputs":[{"name":"config","type":"tuple","indexed":false,"internalType":"struct RateLimiter.Config","components":[{"name":"isEnabled","type":"bool","internalType":"bool"},{"name":"capacity","type":"uint128","internalType":"uint128"},{"name":"rate","type":"uint128","internalType":"uint128"}]}],"anonymous":false},{"type":"event","name":"TokensConsumed","inputs":[{"name":"tokens","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"error","name":"AggregateValueMaxCapacityExceeded","inputs":[{"name":"capacity","type":"uint256","internalType":"uint256"},{"name":"requested","type":"uint256","internalType":"uint256"}]},{"type":"error","name":"AggregateValueRateLimitReached","inputs":[{"name":"minWaitInSeconds","type":"uint256","internalType":"uint256"},{"name":"available","type":"uint256","internalType":"uint256"}]},{"type":"error","name":"BucketOverfilled","inputs":[]},{"type":"error","name":"DisabledNonZeroRateLimit","inputs":[{"name":"config","type":"tuple","internalType":"struct RateLimiter.Config","components":[{"name":"isEnabled","type":"bool","internalType":"bool"},{"name":"capacity","type":"uint128","internalType":"uint128"},{"name":"rate","type":"uint128","internalType":"uint128"}]}]},{"type":"error","name":"InvalidRateLimitRate","inputs":[{"name":"rateLimiterConfig","type":"tuple","internalType":"struct RateLimiter.Config","components":[{"name":"isEnabled","type":"bool","internalType":"bool"},{"name":"capacity","type":"uint128","internalType":"uint128"},{"name":"rate","type":"uint128","internalType":"uint128"}]}]},{"type":"error","name":"OnlyCallableByAdminOrOwner","inputs":[]},{"type":"error","name":"RateLimitMustBeDisabled","inputs":[]},{"type":"error","name":"TokenMaxCapacityExceeded","inputs":[{"name":"capacity","type":"uint256","internalType":"uint256"},{"name":"requested","type":"uint256","internalType":"uint256"},{"name":"tokenAddress","type":"address","internalType":"address"}]},{"type":"error","name":"TokenRateLimitReached","inputs":[{"name":"minWaitInSeconds","type":"uint256","internalType":"uint256"},{"name":"available","type":"uint256","internalType":"uint256"},{"name":"tokenAddress","type":"address","internalType":"address"}]}],"bytecode":{"object":"0x602d6050600b82828239805160001a6073146043577f4e487b7100000000000000000000000000000000000000000000000000000000600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea164736f6c6343000818000a","sourceMap":"573:6403:33:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x73000000000000000000000000000000000000000030146080604052600080fdfea164736f6c6343000818000a","sourceMap":"573:6403:33:-:0;;;;;;;;","linkReferences":{}},"methodIdentifiers":{},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.24+commit.e11b9ed9\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"capacity\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"requested\",\"type\":\"uint256\"}],\"name\":\"AggregateValueMaxCapacityExceeded\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"minWaitInSeconds\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"available\",\"type\":\"uint256\"}],\"name\":\"AggregateValueRateLimitReached\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"BucketOverfilled\",\"type\":\"error\"},{\"inputs\":[{\"components\":[{\"internalType\":\"bool\",\"name\":\"isEnabled\",\"type\":\"bool\"},{\"internalType\":\"uint128\",\"name\":\"capacity\",\"type\":\"uint128\"},{\"internalType\":\"uint128\",\"name\":\"rate\",\"type\":\"uint128\"}],\"internalType\":\"struct RateLimiter.Config\",\"name\":\"config\",\"type\":\"tuple\"}],\"name\":\"DisabledNonZeroRateLimit\",\"type\":\"error\"},{\"inputs\":[{\"components\":[{\"internalType\":\"bool\",\"name\":\"isEnabled\",\"type\":\"bool\"},{\"internalType\":\"uint128\",\"name\":\"capacity\",\"type\":\"uint128\"},{\"internalType\":\"uint128\",\"name\":\"rate\",\"type\":\"uint128\"}],\"internalType\":\"struct RateLimiter.Config\",\"name\":\"rateLimiterConfig\",\"type\":\"tuple\"}],\"name\":\"InvalidRateLimitRate\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"OnlyCallableByAdminOrOwner\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"RateLimitMustBeDisabled\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"capacity\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"requested\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"tokenAddress\",\"type\":\"address\"}],\"name\":\"TokenMaxCapacityExceeded\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"minWaitInSeconds\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"available\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"tokenAddress\",\"type\":\"address\"}],\"name\":\"TokenRateLimitReached\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"components\":[{\"internalType\":\"bool\",\"name\":\"isEnabled\",\"type\":\"bool\"},{\"internalType\":\"uint128\",\"name\":\"capacity\",\"type\":\"uint128\"},{\"internalType\":\"uint128\",\"name\":\"rate\",\"type\":\"uint128\"}],\"indexed\":false,\"internalType\":\"struct RateLimiter.Config\",\"name\":\"config\",\"type\":\"tuple\"}],\"name\":\"ConfigChanged\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"tokens\",\"type\":\"uint256\"}],\"name\":\"TokensConsumed\",\"type\":\"event\"}],\"devdoc\":{\"details\":\"uint128 is safe for rate limiter state. For USD value rate limiting, it can adequately store USD value in 18 decimals. For ERC20 token amount rate limiting, all tokens that will be listed will have at most a supply of uint128.max tokens, and it will therefore not overflow the bucket. In exceptional scenarios where tokens consumed may be larger than uint128, e.g. compromised issuer, an enabled RateLimiter will check and revert.\",\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"notice\":\"Implements Token Bucket rate limiting.\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"ccip/libraries/RateLimiter.sol\":\"RateLimiter\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"none\"},\"optimizer\":{\"enabled\":false,\"runs\":200},\"remappings\":[\":forge-std/=foundry-lib/forge-std/src/\"]},\"sources\":{\"ccip/libraries/RateLimiter.sol\":{\"keccak256\":\"0x90986d51dde66d004caf92b58debc0ebf770b081b71cb354d32e11d4ac513908\",\"license\":\"BUSL-1.1\",\"urls\":[\"bzz-raw://718a68a509daa21040d1a19860216e5b71ea376f853affa6132caaae160068dc\",\"dweb:/ipfs/QmctwkDwgvLKbjKhZZB7DYBLeWaTVWBASpfTQFA2nkaXv1\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.24+commit.e11b9ed9"},"language":"Solidity","output":{"abi":[{"inputs":[{"internalType":"uint256","name":"capacity","type":"uint256"},{"internalType":"uint256","name":"requested","type":"uint256"}],"type":"error","name":"AggregateValueMaxCapacityExceeded"},{"inputs":[{"internalType":"uint256","name":"minWaitInSeconds","type":"uint256"},{"internalType":"uint256","name":"available","type":"uint256"}],"type":"error","name":"AggregateValueRateLimitReached"},{"inputs":[],"type":"error","name":"BucketOverfilled"},{"inputs":[{"internalType":"struct RateLimiter.Config","name":"config","type":"tuple","components":[{"internalType":"bool","name":"isEnabled","type":"bool"},{"internalType":"uint128","name":"capacity","type":"uint128"},{"internalType":"uint128","name":"rate","type":"uint128"}]}],"type":"error","name":"DisabledNonZeroRateLimit"},{"inputs":[{"internalType":"struct RateLimiter.Config","name":"rateLimiterConfig","type":"tuple","components":[{"internalType":"bool","name":"isEnabled","type":"bool"},{"internalType":"uint128","name":"capacity","type":"uint128"},{"internalType":"uint128","name":"rate","type":"uint128"}]}],"type":"error","name":"InvalidRateLimitRate"},{"inputs":[],"type":"error","name":"OnlyCallableByAdminOrOwner"},{"inputs":[],"type":"error","name":"RateLimitMustBeDisabled"},{"inputs":[{"internalType":"uint256","name":"capacity","type":"uint256"},{"internalType":"uint256","name":"requested","type":"uint256"},{"internalType":"address","name":"tokenAddress","type":"address"}],"type":"error","name":"TokenMaxCapacityExceeded"},{"inputs":[{"internalType":"uint256","name":"minWaitInSeconds","type":"uint256"},{"internalType":"uint256","name":"available","type":"uint256"},{"internalType":"address","name":"tokenAddress","type":"address"}],"type":"error","name":"TokenRateLimitReached"},{"inputs":[{"internalType":"struct RateLimiter.Config","name":"config","type":"tuple","components":[{"internalType":"bool","name":"isEnabled","type":"bool"},{"internalType":"uint128","name":"capacity","type":"uint128"},{"internalType":"uint128","name":"rate","type":"uint128"}],"indexed":false}],"type":"event","name":"ConfigChanged","anonymous":false},{"inputs":[{"internalType":"uint256","name":"tokens","type":"uint256","indexed":false}],"type":"event","name":"TokensConsumed","anonymous":false}],"devdoc":{"kind":"dev","methods":{},"version":1},"userdoc":{"kind":"user","methods":{},"version":1}},"settings":{"remappings":["forge-std/=foundry-lib/forge-std/src/"],"optimizer":{"enabled":false,"runs":200},"metadata":{"bytecodeHash":"none"},"compilationTarget":{"ccip/libraries/RateLimiter.sol":"RateLimiter"},"evmVersion":"paris","libraries":{}},"sources":{"ccip/libraries/RateLimiter.sol":{"keccak256":"0x90986d51dde66d004caf92b58debc0ebf770b081b71cb354d32e11d4ac513908","urls":["bzz-raw://718a68a509daa21040d1a19860216e5b71ea376f853affa6132caaae160068dc","dweb:/ipfs/QmctwkDwgvLKbjKhZZB7DYBLeWaTVWBASpfTQFA2nkaXv1"],"license":"BUSL-1.1"}},"version":1},"ast":{"absolutePath":"ccip/libraries/RateLimiter.sol","id":8894,"exportedSymbols":{"RateLimiter":[8893]},"nodeType":"SourceUnit","src":"37:6940:33","nodes":[{"id":8437,"nodeType":"PragmaDirective","src":"37:23:33","nodes":[],"literals":["solidity","^","0.8",".0"]},{"id":8893,"nodeType":"ContractDefinition","src":"573:6403:33","nodes":[{"id":8440,"nodeType":"ErrorDefinition","src":"597:25:33","nodes":[],"errorSelector":"9725942a","name":"BucketOverfilled","nameLocation":"603:16:33","parameters":{"id":8439,"nodeType":"ParameterList","parameters":[],"src":"619:2:33"}},{"id":8442,"nodeType":"ErrorDefinition","src":"625:35:33","nodes":[],"errorSelector":"f6cd5620","name":"OnlyCallableByAdminOrOwner","nameLocation":"631:26:33","parameters":{"id":8441,"nodeType":"ParameterList","parameters":[],"src":"657:2:33"}},{"id":8450,"nodeType":"ErrorDefinition","src":"663:90:33","nodes":[],"errorSelector":"1a76572a","name":"TokenMaxCapacityExceeded","nameLocation":"669:24:33","parameters":{"id":8449,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8444,"mutability":"mutable","name":"capacity","nameLocation":"702:8:33","nodeType":"VariableDeclaration","scope":8450,"src":"694:16:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8443,"name":"uint256","nodeType":"ElementaryTypeName","src":"694:7:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":8446,"mutability":"mutable","name":"requested","nameLocation":"720:9:33","nodeType":"VariableDeclaration","scope":8450,"src":"712:17:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8445,"name":"uint256","nodeType":"ElementaryTypeName","src":"712:7:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":8448,"mutability":"mutable","name":"tokenAddress","nameLocation":"739:12:33","nodeType":"VariableDeclaration","scope":8450,"src":"731:20:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":8447,"name":"address","nodeType":"ElementaryTypeName","src":"731:7:33","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"693:59:33"}},{"id":8458,"nodeType":"ErrorDefinition","src":"756:95:33","nodes":[],"errorSelector":"d0c8d23a","name":"TokenRateLimitReached","nameLocation":"762:21:33","parameters":{"id":8457,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8452,"mutability":"mutable","name":"minWaitInSeconds","nameLocation":"792:16:33","nodeType":"VariableDeclaration","scope":8458,"src":"784:24:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8451,"name":"uint256","nodeType":"ElementaryTypeName","src":"784:7:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":8454,"mutability":"mutable","name":"available","nameLocation":"818:9:33","nodeType":"VariableDeclaration","scope":8458,"src":"810:17:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8453,"name":"uint256","nodeType":"ElementaryTypeName","src":"810:7:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":8456,"mutability":"mutable","name":"tokenAddress","nameLocation":"837:12:33","nodeType":"VariableDeclaration","scope":8458,"src":"829:20:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":8455,"name":"address","nodeType":"ElementaryTypeName","src":"829:7:33","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"783:67:33"}},{"id":8464,"nodeType":"ErrorDefinition","src":"854:77:33","nodes":[],"errorSelector":"f94ebcd1","name":"AggregateValueMaxCapacityExceeded","nameLocation":"860:33:33","parameters":{"id":8463,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8460,"mutability":"mutable","name":"capacity","nameLocation":"902:8:33","nodeType":"VariableDeclaration","scope":8464,"src":"894:16:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8459,"name":"uint256","nodeType":"ElementaryTypeName","src":"894:7:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":8462,"mutability":"mutable","name":"requested","nameLocation":"920:9:33","nodeType":"VariableDeclaration","scope":8464,"src":"912:17:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8461,"name":"uint256","nodeType":"ElementaryTypeName","src":"912:7:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"893:37:33"}},{"id":8470,"nodeType":"ErrorDefinition","src":"934:82:33","nodes":[],"errorSelector":"15279c08","name":"AggregateValueRateLimitReached","nameLocation":"940:30:33","parameters":{"id":8469,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8466,"mutability":"mutable","name":"minWaitInSeconds","nameLocation":"979:16:33","nodeType":"VariableDeclaration","scope":8470,"src":"971:24:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8465,"name":"uint256","nodeType":"ElementaryTypeName","src":"971:7:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":8468,"mutability":"mutable","name":"available","nameLocation":"1005:9:33","nodeType":"VariableDeclaration","scope":8470,"src":"997:17:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8467,"name":"uint256","nodeType":"ElementaryTypeName","src":"997:7:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"970:45:33"}},{"id":8475,"nodeType":"ErrorDefinition","src":"1019:53:33","nodes":[],"errorSelector":"8020d124","name":"InvalidRateLimitRate","nameLocation":"1025:20:33","parameters":{"id":8474,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8473,"mutability":"mutable","name":"rateLimiterConfig","nameLocation":"1053:17:33","nodeType":"VariableDeclaration","scope":8475,"src":"1046:24:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_struct$_Config_$8509_memory_ptr","typeString":"struct RateLimiter.Config"},"typeName":{"id":8472,"nodeType":"UserDefinedTypeName","pathNode":{"id":8471,"name":"Config","nameLocations":["1046:6:33"],"nodeType":"IdentifierPath","referencedDeclaration":8509,"src":"1046:6:33"},"referencedDeclaration":8509,"src":"1046:6:33","typeDescriptions":{"typeIdentifier":"t_struct$_Config_$8509_storage_ptr","typeString":"struct RateLimiter.Config"}},"visibility":"internal"}],"src":"1045:26:33"}},{"id":8480,"nodeType":"ErrorDefinition","src":"1075:46:33","nodes":[],"errorSelector":"d68af9cc","name":"DisabledNonZeroRateLimit","nameLocation":"1081:24:33","parameters":{"id":8479,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8478,"mutability":"mutable","name":"config","nameLocation":"1113:6:33","nodeType":"VariableDeclaration","scope":8480,"src":"1106:13:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_struct$_Config_$8509_memory_ptr","typeString":"struct RateLimiter.Config"},"typeName":{"id":8477,"nodeType":"UserDefinedTypeName","pathNode":{"id":8476,"name":"Config","nameLocations":["1106:6:33"],"nodeType":"IdentifierPath","referencedDeclaration":8509,"src":"1106:6:33"},"referencedDeclaration":8509,"src":"1106:6:33","typeDescriptions":{"typeIdentifier":"t_struct$_Config_$8509_storage_ptr","typeString":"struct RateLimiter.Config"}},"visibility":"internal"}],"src":"1105:15:33"}},{"id":8482,"nodeType":"ErrorDefinition","src":"1124:32:33","nodes":[],"errorSelector":"433fc33d","name":"RateLimitMustBeDisabled","nameLocation":"1130:23:33","parameters":{"id":8481,"nodeType":"ParameterList","parameters":[],"src":"1153:2:33"}},{"id":8486,"nodeType":"EventDefinition","src":"1160:37:33","nodes":[],"anonymous":false,"eventSelector":"1871cdf8010e63f2eb8384381a68dfa7416dc571a5517e66e88b2d2d0c0a690a","name":"TokensConsumed","nameLocation":"1166:14:33","parameters":{"id":8485,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8484,"indexed":false,"mutability":"mutable","name":"tokens","nameLocation":"1189:6:33","nodeType":"VariableDeclaration","scope":8486,"src":"1181:14:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8483,"name":"uint256","nodeType":"ElementaryTypeName","src":"1181:7:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1180:16:33"}},{"id":8491,"nodeType":"EventDefinition","src":"1200:35:33","nodes":[],"anonymous":false,"eventSelector":"9ea3374b67bf275e6bb9c8ae68f9cae023e1c528b4b27e092f0bb209d3531c19","name":"ConfigChanged","nameLocation":"1206:13:33","parameters":{"id":8490,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8489,"indexed":false,"mutability":"mutable","name":"config","nameLocation":"1227:6:33","nodeType":"VariableDeclaration","scope":8491,"src":"1220:13:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_struct$_Config_$8509_memory_ptr","typeString":"struct RateLimiter.Config"},"typeName":{"id":8488,"nodeType":"UserDefinedTypeName","pathNode":{"id":8487,"name":"Config","nameLocations":["1220:6:33"],"nodeType":"IdentifierPath","referencedDeclaration":8509,"src":"1220:6:33"},"referencedDeclaration":8509,"src":"1220:6:33","typeDescriptions":{"typeIdentifier":"t_struct$_Config_$8509_storage_ptr","typeString":"struct RateLimiter.Config"}},"visibility":"internal"}],"src":"1219:15:33"}},{"id":8502,"nodeType":"StructDefinition","src":"1239:518:33","nodes":[],"canonicalName":"RateLimiter.TokenBucket","members":[{"constant":false,"id":8493,"mutability":"mutable","name":"tokens","nameLocation":"1272:6:33","nodeType":"VariableDeclaration","scope":8502,"src":"1264:14:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"},"typeName":{"id":8492,"name":"uint128","nodeType":"ElementaryTypeName","src":"1264:7:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"visibility":"internal"},{"constant":false,"id":8495,"mutability":"mutable","name":"lastUpdated","nameLocation":"1365:11:33","nodeType":"VariableDeclaration","scope":8502,"src":"1358:18:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint32","typeString":"uint32"},"typeName":{"id":8494,"name":"uint32","nodeType":"ElementaryTypeName","src":"1358:6:33","typeDescriptions":{"typeIdentifier":"t_uint32","typeString":"uint32"}},"visibility":"internal"},{"constant":false,"id":8497,"mutability":"mutable","name":"isEnabled","nameLocation":"1464:9:33","nodeType":"VariableDeclaration","scope":8502,"src":"1459:14:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":8496,"name":"bool","nodeType":"ElementaryTypeName","src":"1459:4:33","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"},{"constant":false,"id":8499,"mutability":"mutable","name":"capacity","nameLocation":"1567:8:33","nodeType":"VariableDeclaration","scope":8502,"src":"1559:16:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"},"typeName":{"id":8498,"name":"uint128","nodeType":"ElementaryTypeName","src":"1559:7:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"visibility":"internal"},{"constant":false,"id":8501,"mutability":"mutable","name":"rate","nameLocation":"1660:4:33","nodeType":"VariableDeclaration","scope":8502,"src":"1652:12:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"},"typeName":{"id":8500,"name":"uint128","nodeType":"ElementaryTypeName","src":"1652:7:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"visibility":"internal"}],"name":"TokenBucket","nameLocation":"1246:11:33","scope":8893,"visibility":"public"},{"id":8509,"nodeType":"StructDefinition","src":"1761:267:33","nodes":[],"canonicalName":"RateLimiter.Config","members":[{"constant":false,"id":8504,"mutability":"mutable","name":"isEnabled","nameLocation":"1786:9:33","nodeType":"VariableDeclaration","scope":8509,"src":"1781:14:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":8503,"name":"bool","nodeType":"ElementaryTypeName","src":"1781:4:33","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"},{"constant":false,"id":8506,"mutability":"mutable","name":"capacity","nameLocation":"1867:8:33","nodeType":"VariableDeclaration","scope":8509,"src":"1859:16:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"},"typeName":{"id":8505,"name":"uint128","nodeType":"ElementaryTypeName","src":"1859:7:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"visibility":"internal"},{"constant":false,"id":8508,"mutability":"mutable","name":"rate","nameLocation":"1951:4:33","nodeType":"VariableDeclaration","scope":8509,"src":"1943:12:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"},"typeName":{"id":8507,"name":"uint128","nodeType":"ElementaryTypeName","src":"1943:7:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"visibility":"internal"}],"name":"Config","nameLocation":"1768:6:33","scope":8893,"visibility":"public"},{"id":8664,"nodeType":"FunctionDefinition","src":"2516:1790:33","nodes":[],"body":{"id":8663,"nodeType":"Block","src":"2618:1688:33","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":8526,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":8522,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"!","prefix":true,"src":"2733:19:33","subExpression":{"expression":{"id":8520,"name":"s_bucket","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8513,"src":"2734:8:33","typeDescriptions":{"typeIdentifier":"t_struct$_TokenBucket_$8502_storage_ptr","typeString":"struct RateLimiter.TokenBucket storage pointer"}},"id":8521,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"2743:9:33","memberName":"isEnabled","nodeType":"MemberAccess","referencedDeclaration":8497,"src":"2734:18:33","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"||","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":8525,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":8523,"name":"requestTokens","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8515,"src":"2756:13:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":8524,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2773:1:33","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"2756:18:33","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"2733:41:33","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":8529,"nodeType":"IfStatement","src":"2729:68:33","trueBody":{"id":8528,"nodeType":"Block","src":"2776:21:33","statements":[{"functionReturnParameters":8519,"id":8527,"nodeType":"Return","src":"2784:7:33"}]}},{"assignments":[8531],"declarations":[{"constant":false,"id":8531,"mutability":"mutable","name":"tokens","nameLocation":"2811:6:33","nodeType":"VariableDeclaration","scope":8663,"src":"2803:14:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8530,"name":"uint256","nodeType":"ElementaryTypeName","src":"2803:7:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":8534,"initialValue":{"expression":{"id":8532,"name":"s_bucket","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8513,"src":"2820:8:33","typeDescriptions":{"typeIdentifier":"t_struct$_TokenBucket_$8502_storage_ptr","typeString":"struct RateLimiter.TokenBucket storage pointer"}},"id":8533,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"2829:6:33","memberName":"tokens","nodeType":"MemberAccess","referencedDeclaration":8493,"src":"2820:15:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"VariableDeclarationStatement","src":"2803:32:33"},{"assignments":[8536],"declarations":[{"constant":false,"id":8536,"mutability":"mutable","name":"capacity","nameLocation":"2849:8:33","nodeType":"VariableDeclaration","scope":8663,"src":"2841:16:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8535,"name":"uint256","nodeType":"ElementaryTypeName","src":"2841:7:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":8539,"initialValue":{"expression":{"id":8537,"name":"s_bucket","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8513,"src":"2860:8:33","typeDescriptions":{"typeIdentifier":"t_struct$_TokenBucket_$8502_storage_ptr","typeString":"struct RateLimiter.TokenBucket storage pointer"}},"id":8538,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"2869:8:33","memberName":"capacity","nodeType":"MemberAccess","referencedDeclaration":8499,"src":"2860:17:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"VariableDeclarationStatement","src":"2841:36:33"},{"assignments":[8541],"declarations":[{"constant":false,"id":8541,"mutability":"mutable","name":"timeDiff","nameLocation":"2891:8:33","nodeType":"VariableDeclaration","scope":8663,"src":"2883:16:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8540,"name":"uint256","nodeType":"ElementaryTypeName","src":"2883:7:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":8547,"initialValue":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":8546,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":8542,"name":"block","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-4,"src":"2902:5:33","typeDescriptions":{"typeIdentifier":"t_magic_block","typeString":"block"}},"id":8543,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"2908:9:33","memberName":"timestamp","nodeType":"MemberAccess","src":"2902:15:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"expression":{"id":8544,"name":"s_bucket","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8513,"src":"2920:8:33","typeDescriptions":{"typeIdentifier":"t_struct$_TokenBucket_$8502_storage_ptr","typeString":"struct RateLimiter.TokenBucket storage pointer"}},"id":8545,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"2929:11:33","memberName":"lastUpdated","nodeType":"MemberAccess","referencedDeclaration":8495,"src":"2920:20:33","typeDescriptions":{"typeIdentifier":"t_uint32","typeString":"uint32"}},"src":"2902:38:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"2883:57:33"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":8550,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":8548,"name":"timeDiff","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8541,"src":"2951:8:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"hexValue":"30","id":8549,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2963:1:33","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"2951:13:33","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":8579,"nodeType":"IfStatement","src":"2947:271:33","trueBody":{"id":8578,"nodeType":"Block","src":"2966:252:33","statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":8553,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":8551,"name":"tokens","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8531,"src":"2978:6:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"id":8552,"name":"capacity","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8536,"src":"2987:8:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2978:17:33","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":8557,"nodeType":"IfStatement","src":"2974:48:33","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":8554,"name":"BucketOverfilled","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8440,"src":"3004:16:33","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":8555,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3004:18:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":8556,"nodeType":"RevertStatement","src":"2997:25:33"}},{"expression":{"id":8566,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":8558,"name":"tokens","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8531,"src":"3088:6:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":8560,"name":"capacity","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8536,"src":"3114:8:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":8561,"name":"tokens","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8531,"src":"3124:6:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":8562,"name":"timeDiff","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8541,"src":"3132:8:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"expression":{"id":8563,"name":"s_bucket","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8513,"src":"3142:8:33","typeDescriptions":{"typeIdentifier":"t_struct$_TokenBucket_$8502_storage_ptr","typeString":"struct RateLimiter.TokenBucket storage pointer"}},"id":8564,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"3151:4:33","memberName":"rate","nodeType":"MemberAccess","referencedDeclaration":8501,"src":"3142:13:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint128","typeString":"uint128"}],"id":8559,"name":"_calculateRefill","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8874,"src":"3097:16:33","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256,uint256) pure returns (uint256)"}},"id":8565,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3097:59:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3088:68:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":8567,"nodeType":"ExpressionStatement","src":"3088:68:33"},{"expression":{"id":8576,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":8568,"name":"s_bucket","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8513,"src":"3165:8:33","typeDescriptions":{"typeIdentifier":"t_struct$_TokenBucket_$8502_storage_ptr","typeString":"struct RateLimiter.TokenBucket storage pointer"}},"id":8570,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"3174:11:33","memberName":"lastUpdated","nodeType":"MemberAccess","referencedDeclaration":8495,"src":"3165:20:33","typeDescriptions":{"typeIdentifier":"t_uint32","typeString":"uint32"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"expression":{"id":8573,"name":"block","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-4,"src":"3195:5:33","typeDescriptions":{"typeIdentifier":"t_magic_block","typeString":"block"}},"id":8574,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"3201:9:33","memberName":"timestamp","nodeType":"MemberAccess","src":"3195:15:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":8572,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3188:6:33","typeDescriptions":{"typeIdentifier":"t_type$_t_uint32_$","typeString":"type(uint32)"},"typeName":{"id":8571,"name":"uint32","nodeType":"ElementaryTypeName","src":"3188:6:33","typeDescriptions":{}}},"id":8575,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3188:23:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint32","typeString":"uint32"}},"src":"3165:46:33","typeDescriptions":{"typeIdentifier":"t_uint32","typeString":"uint32"}},"id":8577,"nodeType":"ExpressionStatement","src":"3165:46:33"}]}},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":8582,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":8580,"name":"capacity","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8536,"src":"3228:8:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"id":8581,"name":"requestTokens","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8515,"src":"3239:13:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3228:24:33","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":8602,"nodeType":"IfStatement","src":"3224:302:33","trueBody":{"id":8601,"nodeType":"Block","src":"3254:272:33","statements":[{"condition":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":8588,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":8583,"name":"tokenAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8517,"src":"3348:12:33","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"arguments":[{"hexValue":"30","id":8586,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3372:1:33","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":8585,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3364:7:33","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":8584,"name":"address","nodeType":"ElementaryTypeName","src":"3364:7:33","typeDescriptions":{}}},"id":8587,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3364:10:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"3348:26:33","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":8594,"nodeType":"IfStatement","src":"3344:97:33","trueBody":{"errorCall":{"arguments":[{"id":8590,"name":"capacity","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8536,"src":"3417:8:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":8591,"name":"requestTokens","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8515,"src":"3427:13:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":8589,"name":"AggregateValueMaxCapacityExceeded","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8464,"src":"3383:33:33","typeDescriptions":{"typeIdentifier":"t_function_error_pure$_t_uint256_$_t_uint256_$returns$__$","typeString":"function (uint256,uint256) pure"}},"id":8592,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3383:58:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":8593,"nodeType":"RevertStatement","src":"3376:65:33"}},{"errorCall":{"arguments":[{"id":8596,"name":"capacity","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8536,"src":"3481:8:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":8597,"name":"requestTokens","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8515,"src":"3491:13:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":8598,"name":"tokenAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8517,"src":"3506:12:33","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_address","typeString":"address"}],"id":8595,"name":"TokenMaxCapacityExceeded","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8450,"src":"3456:24:33","typeDescriptions":{"typeIdentifier":"t_function_error_pure$_t_uint256_$_t_uint256_$_t_address_$returns$__$","typeString":"function (uint256,uint256,address) pure"}},"id":8599,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3456:63:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":8600,"nodeType":"RevertStatement","src":"3449:70:33"}]}},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":8605,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":8603,"name":"tokens","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8531,"src":"3535:6:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"id":8604,"name":"requestTokens","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8515,"src":"3544:13:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3535:22:33","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":8645,"nodeType":"IfStatement","src":"3531:594:33","trueBody":{"id":8644,"nodeType":"Block","src":"3559:566:33","statements":[{"assignments":[8607],"declarations":[{"constant":false,"id":8607,"mutability":"mutable","name":"rate","nameLocation":"3575:4:33","nodeType":"VariableDeclaration","scope":8644,"src":"3567:12:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8606,"name":"uint256","nodeType":"ElementaryTypeName","src":"3567:7:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":8610,"initialValue":{"expression":{"id":8608,"name":"s_bucket","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8513,"src":"3582:8:33","typeDescriptions":{"typeIdentifier":"t_struct$_TokenBucket_$8502_storage_ptr","typeString":"struct RateLimiter.TokenBucket storage pointer"}},"id":8609,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"3591:4:33","memberName":"rate","nodeType":"MemberAccess","referencedDeclaration":8501,"src":"3582:13:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"VariableDeclarationStatement","src":"3567:28:33"},{"assignments":[8612],"declarations":[{"constant":false,"id":8612,"mutability":"mutable","name":"minWaitInSeconds","nameLocation":"3873:16:33","nodeType":"VariableDeclaration","scope":8644,"src":"3865:24:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8611,"name":"uint256","nodeType":"ElementaryTypeName","src":"3865:7:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":8625,"initialValue":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":8624,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":8621,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":8615,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":8613,"name":"requestTokens","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8515,"src":"3894:13:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":8614,"name":"tokens","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8531,"src":"3910:6:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3894:22:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":8616,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"3893:24:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":8619,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":8617,"name":"rate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8607,"src":"3921:4:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"hexValue":"31","id":8618,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3928:1:33","typeDescriptions":{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"},"value":"1"},"src":"3921:8:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":8620,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"3920:10:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3893:37:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":8622,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"3892:39:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"id":8623,"name":"rate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8607,"src":"3934:4:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3892:46:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"3865:73:33"},{"condition":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":8631,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":8626,"name":"tokenAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8517,"src":"3951:12:33","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"arguments":[{"hexValue":"30","id":8629,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3975:1:33","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":8628,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3967:7:33","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":8627,"name":"address","nodeType":"ElementaryTypeName","src":"3967:7:33","typeDescriptions":{}}},"id":8630,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3967:10:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"3951:26:33","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":8637,"nodeType":"IfStatement","src":"3947:95:33","trueBody":{"errorCall":{"arguments":[{"id":8633,"name":"minWaitInSeconds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8612,"src":"4017:16:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":8634,"name":"tokens","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8531,"src":"4035:6:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":8632,"name":"AggregateValueRateLimitReached","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8470,"src":"3986:30:33","typeDescriptions":{"typeIdentifier":"t_function_error_pure$_t_uint256_$_t_uint256_$returns$__$","typeString":"function (uint256,uint256) pure"}},"id":8635,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3986:56:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":8636,"nodeType":"RevertStatement","src":"3979:63:33"}},{"errorCall":{"arguments":[{"id":8639,"name":"minWaitInSeconds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8612,"src":"4079:16:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":8640,"name":"tokens","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8531,"src":"4097:6:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":8641,"name":"tokenAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8517,"src":"4105:12:33","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_address","typeString":"address"}],"id":8638,"name":"TokenRateLimitReached","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8458,"src":"4057:21:33","typeDescriptions":{"typeIdentifier":"t_function_error_pure$_t_uint256_$_t_uint256_$_t_address_$returns$__$","typeString":"function (uint256,uint256,address) pure"}},"id":8642,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4057:61:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":8643,"nodeType":"RevertStatement","src":"4050:68:33"}]}},{"expression":{"id":8648,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":8646,"name":"tokens","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8531,"src":"4130:6:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"-=","rightHandSide":{"id":8647,"name":"requestTokens","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8515,"src":"4140:13:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4130:23:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":8649,"nodeType":"ExpressionStatement","src":"4130:23:33"},{"expression":{"id":8657,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":8650,"name":"s_bucket","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8513,"src":"4228:8:33","typeDescriptions":{"typeIdentifier":"t_struct$_TokenBucket_$8502_storage_ptr","typeString":"struct RateLimiter.TokenBucket storage pointer"}},"id":8652,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"4237:6:33","memberName":"tokens","nodeType":"MemberAccess","referencedDeclaration":8493,"src":"4228:15:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":8655,"name":"tokens","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8531,"src":"4254:6:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":8654,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"4246:7:33","typeDescriptions":{"typeIdentifier":"t_type$_t_uint128_$","typeString":"type(uint128)"},"typeName":{"id":8653,"name":"uint128","nodeType":"ElementaryTypeName","src":"4246:7:33","typeDescriptions":{}}},"id":8656,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4246:15:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"4228:33:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"id":8658,"nodeType":"ExpressionStatement","src":"4228:33:33"},{"eventCall":{"arguments":[{"id":8660,"name":"requestTokens","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8515,"src":"4287:13:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":8659,"name":"TokensConsumed","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8486,"src":"4272:14:33","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_uint256_$returns$__$","typeString":"function (uint256)"}},"id":8661,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4272:29:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":8662,"nodeType":"EmitStatement","src":"4267:34:33"}]},"documentation":{"id":8510,"nodeType":"StructuredDocumentation","src":"2032:481:33","text":"@notice _consume removes the given tokens from the pool, lowering the\n rate tokens allowed to be consumed for subsequent calls.\n @param requestTokens The total tokens to be consumed from the bucket.\n @param tokenAddress The token to consume capacity for, use 0x0 to indicate aggregate value capacity.\n @dev Reverts when requestTokens exceeds bucket capacity or available tokens in the bucket\n @dev emits removal of requestTokens if requestTokens is > 0"},"implemented":true,"kind":"function","modifiers":[],"name":"_consume","nameLocation":"2525:8:33","parameters":{"id":8518,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8513,"mutability":"mutable","name":"s_bucket","nameLocation":"2554:8:33","nodeType":"VariableDeclaration","scope":8664,"src":"2534:28:33","stateVariable":false,"storageLocation":"storage","typeDescriptions":{"typeIdentifier":"t_struct$_TokenBucket_$8502_storage_ptr","typeString":"struct RateLimiter.TokenBucket"},"typeName":{"id":8512,"nodeType":"UserDefinedTypeName","pathNode":{"id":8511,"name":"TokenBucket","nameLocations":["2534:11:33"],"nodeType":"IdentifierPath","referencedDeclaration":8502,"src":"2534:11:33"},"referencedDeclaration":8502,"src":"2534:11:33","typeDescriptions":{"typeIdentifier":"t_struct$_TokenBucket_$8502_storage_ptr","typeString":"struct RateLimiter.TokenBucket"}},"visibility":"internal"},{"constant":false,"id":8515,"mutability":"mutable","name":"requestTokens","nameLocation":"2572:13:33","nodeType":"VariableDeclaration","scope":8664,"src":"2564:21:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8514,"name":"uint256","nodeType":"ElementaryTypeName","src":"2564:7:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":8517,"mutability":"mutable","name":"tokenAddress","nameLocation":"2595:12:33","nodeType":"VariableDeclaration","scope":8664,"src":"2587:20:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":8516,"name":"address","nodeType":"ElementaryTypeName","src":"2587:7:33","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"2533:75:33"},"returnParameters":{"id":8519,"nodeType":"ParameterList","parameters":[],"src":"2618:0:33"},"scope":8893,"stateMutability":"nonpayable","virtual":false,"visibility":"internal"},{"id":8708,"nodeType":"FunctionDefinition","src":"4429:522:33","nodes":[],"body":{"id":8707,"nodeType":"Block","src":"4533:418:33","nodes":[],"statements":[{"expression":{"id":8693,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":8674,"name":"bucket","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8668,"src":"4747:6:33","typeDescriptions":{"typeIdentifier":"t_struct$_TokenBucket_$8502_memory_ptr","typeString":"struct RateLimiter.TokenBucket memory"}},"id":8676,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"4754:6:33","memberName":"tokens","nodeType":"MemberAccess","referencedDeclaration":8493,"src":"4747:13:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"arguments":[{"expression":{"id":8680,"name":"bucket","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8668,"src":"4794:6:33","typeDescriptions":{"typeIdentifier":"t_struct$_TokenBucket_$8502_memory_ptr","typeString":"struct RateLimiter.TokenBucket memory"}},"id":8681,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4801:8:33","memberName":"capacity","nodeType":"MemberAccess","referencedDeclaration":8499,"src":"4794:15:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},{"expression":{"id":8682,"name":"bucket","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8668,"src":"4811:6:33","typeDescriptions":{"typeIdentifier":"t_struct$_TokenBucket_$8502_memory_ptr","typeString":"struct RateLimiter.TokenBucket memory"}},"id":8683,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4818:6:33","memberName":"tokens","nodeType":"MemberAccess","referencedDeclaration":8493,"src":"4811:13:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":8688,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":8684,"name":"block","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-4,"src":"4826:5:33","typeDescriptions":{"typeIdentifier":"t_magic_block","typeString":"block"}},"id":8685,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4832:9:33","memberName":"timestamp","nodeType":"MemberAccess","src":"4826:15:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"expression":{"id":8686,"name":"bucket","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8668,"src":"4844:6:33","typeDescriptions":{"typeIdentifier":"t_struct$_TokenBucket_$8502_memory_ptr","typeString":"struct RateLimiter.TokenBucket memory"}},"id":8687,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4851:11:33","memberName":"lastUpdated","nodeType":"MemberAccess","referencedDeclaration":8495,"src":"4844:18:33","typeDescriptions":{"typeIdentifier":"t_uint32","typeString":"uint32"}},"src":"4826:36:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"expression":{"id":8689,"name":"bucket","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8668,"src":"4864:6:33","typeDescriptions":{"typeIdentifier":"t_struct$_TokenBucket_$8502_memory_ptr","typeString":"struct RateLimiter.TokenBucket memory"}},"id":8690,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4871:4:33","memberName":"rate","nodeType":"MemberAccess","referencedDeclaration":8501,"src":"4864:11:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint128","typeString":"uint128"},{"typeIdentifier":"t_uint128","typeString":"uint128"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint128","typeString":"uint128"}],"id":8679,"name":"_calculateRefill","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8874,"src":"4777:16:33","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256,uint256) pure returns (uint256)"}},"id":8691,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4777:99:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":8678,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"4769:7:33","typeDescriptions":{"typeIdentifier":"t_type$_t_uint128_$","typeString":"type(uint128)"},"typeName":{"id":8677,"name":"uint128","nodeType":"ElementaryTypeName","src":"4769:7:33","typeDescriptions":{}}},"id":8692,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4769:108:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"4747:130:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"id":8694,"nodeType":"ExpressionStatement","src":"4747:130:33"},{"expression":{"id":8703,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":8695,"name":"bucket","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8668,"src":"4883:6:33","typeDescriptions":{"typeIdentifier":"t_struct$_TokenBucket_$8502_memory_ptr","typeString":"struct RateLimiter.TokenBucket memory"}},"id":8697,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"4890:11:33","memberName":"lastUpdated","nodeType":"MemberAccess","referencedDeclaration":8495,"src":"4883:18:33","typeDescriptions":{"typeIdentifier":"t_uint32","typeString":"uint32"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"expression":{"id":8700,"name":"block","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-4,"src":"4911:5:33","typeDescriptions":{"typeIdentifier":"t_magic_block","typeString":"block"}},"id":8701,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4917:9:33","memberName":"timestamp","nodeType":"MemberAccess","src":"4911:15:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":8699,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"4904:6:33","typeDescriptions":{"typeIdentifier":"t_type$_t_uint32_$","typeString":"type(uint32)"},"typeName":{"id":8698,"name":"uint32","nodeType":"ElementaryTypeName","src":"4904:6:33","typeDescriptions":{}}},"id":8702,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4904:23:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint32","typeString":"uint32"}},"src":"4883:44:33","typeDescriptions":{"typeIdentifier":"t_uint32","typeString":"uint32"}},"id":8704,"nodeType":"ExpressionStatement","src":"4883:44:33"},{"expression":{"id":8705,"name":"bucket","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8668,"src":"4940:6:33","typeDescriptions":{"typeIdentifier":"t_struct$_TokenBucket_$8502_memory_ptr","typeString":"struct RateLimiter.TokenBucket memory"}},"functionReturnParameters":8673,"id":8706,"nodeType":"Return","src":"4933:13:33"}]},"documentation":{"id":8665,"nodeType":"StructuredDocumentation","src":"4310:116:33","text":"@notice Gets the token bucket with its values for the block it was requested at.\n @return The token bucket."},"implemented":true,"kind":"function","modifiers":[],"name":"_currentTokenBucketState","nameLocation":"4438:24:33","parameters":{"id":8669,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8668,"mutability":"mutable","name":"bucket","nameLocation":"4482:6:33","nodeType":"VariableDeclaration","scope":8708,"src":"4463:25:33","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_struct$_TokenBucket_$8502_memory_ptr","typeString":"struct RateLimiter.TokenBucket"},"typeName":{"id":8667,"nodeType":"UserDefinedTypeName","pathNode":{"id":8666,"name":"TokenBucket","nameLocations":["4463:11:33"],"nodeType":"IdentifierPath","referencedDeclaration":8502,"src":"4463:11:33"},"referencedDeclaration":8502,"src":"4463:11:33","typeDescriptions":{"typeIdentifier":"t_struct$_TokenBucket_$8502_storage_ptr","typeString":"struct RateLimiter.TokenBucket"}},"visibility":"internal"}],"src":"4462:27:33"},"returnParameters":{"id":8673,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8672,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":8708,"src":"4513:18:33","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_struct$_TokenBucket_$8502_memory_ptr","typeString":"struct RateLimiter.TokenBucket"},"typeName":{"id":8671,"nodeType":"UserDefinedTypeName","pathNode":{"id":8670,"name":"TokenBucket","nameLocations":["4513:11:33"],"nodeType":"IdentifierPath","referencedDeclaration":8502,"src":"4513:11:33"},"referencedDeclaration":8502,"src":"4513:11:33","typeDescriptions":{"typeIdentifier":"t_struct$_TokenBucket_$8502_storage_ptr","typeString":"struct RateLimiter.TokenBucket"}},"visibility":"internal"}],"src":"4512:20:33"},"scope":8893,"stateMutability":"view","virtual":false,"visibility":"internal"},{"id":8798,"nodeType":"FunctionDefinition","src":"5073:700:33","nodes":[],"body":{"id":8797,"nodeType":"Block","src":"5165:608:33","nodes":[],"statements":[{"assignments":[8719],"declarations":[{"constant":false,"id":8719,"mutability":"mutable","name":"timeDiff","nameLocation":"5299:8:33","nodeType":"VariableDeclaration","scope":8797,"src":"5291:16:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8718,"name":"uint256","nodeType":"ElementaryTypeName","src":"5291:7:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":8725,"initialValue":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":8724,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":8720,"name":"block","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-4,"src":"5310:5:33","typeDescriptions":{"typeIdentifier":"t_magic_block","typeString":"block"}},"id":8721,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5316:9:33","memberName":"timestamp","nodeType":"MemberAccess","src":"5310:15:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"expression":{"id":8722,"name":"s_bucket","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8712,"src":"5328:8:33","typeDescriptions":{"typeIdentifier":"t_struct$_TokenBucket_$8502_storage_ptr","typeString":"struct RateLimiter.TokenBucket storage pointer"}},"id":8723,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"5337:11:33","memberName":"lastUpdated","nodeType":"MemberAccess","referencedDeclaration":8495,"src":"5328:20:33","typeDescriptions":{"typeIdentifier":"t_uint32","typeString":"uint32"}},"src":"5310:38:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"5291:57:33"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":8728,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":8726,"name":"timeDiff","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8719,"src":"5358:8:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"hexValue":"30","id":8727,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"5370:1:33","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"5358:13:33","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":8757,"nodeType":"IfStatement","src":"5354:193:33","trueBody":{"id":8756,"nodeType":"Block","src":"5373:174:33","statements":[{"expression":{"id":8744,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":8729,"name":"s_bucket","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8712,"src":"5381:8:33","typeDescriptions":{"typeIdentifier":"t_struct$_TokenBucket_$8502_storage_ptr","typeString":"struct RateLimiter.TokenBucket storage pointer"}},"id":8731,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"5390:6:33","memberName":"tokens","nodeType":"MemberAccess","referencedDeclaration":8493,"src":"5381:15:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"arguments":[{"expression":{"id":8735,"name":"s_bucket","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8712,"src":"5424:8:33","typeDescriptions":{"typeIdentifier":"t_struct$_TokenBucket_$8502_storage_ptr","typeString":"struct RateLimiter.TokenBucket storage pointer"}},"id":8736,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"5433:8:33","memberName":"capacity","nodeType":"MemberAccess","referencedDeclaration":8499,"src":"5424:17:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},{"expression":{"id":8737,"name":"s_bucket","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8712,"src":"5443:8:33","typeDescriptions":{"typeIdentifier":"t_struct$_TokenBucket_$8502_storage_ptr","typeString":"struct RateLimiter.TokenBucket storage pointer"}},"id":8738,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"5452:6:33","memberName":"tokens","nodeType":"MemberAccess","referencedDeclaration":8493,"src":"5443:15:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},{"id":8739,"name":"timeDiff","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8719,"src":"5460:8:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"expression":{"id":8740,"name":"s_bucket","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8712,"src":"5470:8:33","typeDescriptions":{"typeIdentifier":"t_struct$_TokenBucket_$8502_storage_ptr","typeString":"struct RateLimiter.TokenBucket storage pointer"}},"id":8741,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"5479:4:33","memberName":"rate","nodeType":"MemberAccess","referencedDeclaration":8501,"src":"5470:13:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint128","typeString":"uint128"},{"typeIdentifier":"t_uint128","typeString":"uint128"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint128","typeString":"uint128"}],"id":8734,"name":"_calculateRefill","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8874,"src":"5407:16:33","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256,uint256) pure returns (uint256)"}},"id":8742,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5407:77:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":8733,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"5399:7:33","typeDescriptions":{"typeIdentifier":"t_type$_t_uint128_$","typeString":"type(uint128)"},"typeName":{"id":8732,"name":"uint128","nodeType":"ElementaryTypeName","src":"5399:7:33","typeDescriptions":{}}},"id":8743,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5399:86:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"5381:104:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"id":8745,"nodeType":"ExpressionStatement","src":"5381:104:33"},{"expression":{"id":8754,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":8746,"name":"s_bucket","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8712,"src":"5494:8:33","typeDescriptions":{"typeIdentifier":"t_struct$_TokenBucket_$8502_storage_ptr","typeString":"struct RateLimiter.TokenBucket storage pointer"}},"id":8748,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"5503:11:33","memberName":"lastUpdated","nodeType":"MemberAccess","referencedDeclaration":8495,"src":"5494:20:33","typeDescriptions":{"typeIdentifier":"t_uint32","typeString":"uint32"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"expression":{"id":8751,"name":"block","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-4,"src":"5524:5:33","typeDescriptions":{"typeIdentifier":"t_magic_block","typeString":"block"}},"id":8752,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5530:9:33","memberName":"timestamp","nodeType":"MemberAccess","src":"5524:15:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":8750,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"5517:6:33","typeDescriptions":{"typeIdentifier":"t_type$_t_uint32_$","typeString":"type(uint32)"},"typeName":{"id":8749,"name":"uint32","nodeType":"ElementaryTypeName","src":"5517:6:33","typeDescriptions":{}}},"id":8753,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5517:23:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint32","typeString":"uint32"}},"src":"5494:46:33","typeDescriptions":{"typeIdentifier":"t_uint32","typeString":"uint32"}},"id":8755,"nodeType":"ExpressionStatement","src":"5494:46:33"}]}},{"expression":{"id":8770,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":8758,"name":"s_bucket","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8712,"src":"5553:8:33","typeDescriptions":{"typeIdentifier":"t_struct$_TokenBucket_$8502_storage_ptr","typeString":"struct RateLimiter.TokenBucket storage pointer"}},"id":8760,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"5562:6:33","memberName":"tokens","nodeType":"MemberAccess","referencedDeclaration":8493,"src":"5553:15:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"arguments":[{"expression":{"id":8764,"name":"config","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8715,"src":"5584:6:33","typeDescriptions":{"typeIdentifier":"t_struct$_Config_$8509_memory_ptr","typeString":"struct RateLimiter.Config memory"}},"id":8765,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"5591:8:33","memberName":"capacity","nodeType":"MemberAccess","referencedDeclaration":8506,"src":"5584:15:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},{"expression":{"id":8766,"name":"s_bucket","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8712,"src":"5601:8:33","typeDescriptions":{"typeIdentifier":"t_struct$_TokenBucket_$8502_storage_ptr","typeString":"struct RateLimiter.TokenBucket storage pointer"}},"id":8767,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"5610:6:33","memberName":"tokens","nodeType":"MemberAccess","referencedDeclaration":8493,"src":"5601:15:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint128","typeString":"uint128"},{"typeIdentifier":"t_uint128","typeString":"uint128"}],"id":8763,"name":"_min","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8892,"src":"5579:4:33","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":8768,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5579:38:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":8762,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"5571:7:33","typeDescriptions":{"typeIdentifier":"t_type$_t_uint128_$","typeString":"type(uint128)"},"typeName":{"id":8761,"name":"uint128","nodeType":"ElementaryTypeName","src":"5571:7:33","typeDescriptions":{}}},"id":8769,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5571:47:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"5553:65:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"id":8771,"nodeType":"ExpressionStatement","src":"5553:65:33"},{"expression":{"id":8777,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":8772,"name":"s_bucket","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8712,"src":"5624:8:33","typeDescriptions":{"typeIdentifier":"t_struct$_TokenBucket_$8502_storage_ptr","typeString":"struct RateLimiter.TokenBucket storage pointer"}},"id":8774,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"5633:9:33","memberName":"isEnabled","nodeType":"MemberAccess","referencedDeclaration":8497,"src":"5624:18:33","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"expression":{"id":8775,"name":"config","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8715,"src":"5645:6:33","typeDescriptions":{"typeIdentifier":"t_struct$_Config_$8509_memory_ptr","typeString":"struct RateLimiter.Config memory"}},"id":8776,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"5652:9:33","memberName":"isEnabled","nodeType":"MemberAccess","referencedDeclaration":8504,"src":"5645:16:33","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"5624:37:33","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":8778,"nodeType":"ExpressionStatement","src":"5624:37:33"},{"expression":{"id":8784,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":8779,"name":"s_bucket","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8712,"src":"5667:8:33","typeDescriptions":{"typeIdentifier":"t_struct$_TokenBucket_$8502_storage_ptr","typeString":"struct RateLimiter.TokenBucket storage pointer"}},"id":8781,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"5676:8:33","memberName":"capacity","nodeType":"MemberAccess","referencedDeclaration":8499,"src":"5667:17:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"expression":{"id":8782,"name":"config","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8715,"src":"5687:6:33","typeDescriptions":{"typeIdentifier":"t_struct$_Config_$8509_memory_ptr","typeString":"struct RateLimiter.Config memory"}},"id":8783,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"5694:8:33","memberName":"capacity","nodeType":"MemberAccess","referencedDeclaration":8506,"src":"5687:15:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"5667:35:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"id":8785,"nodeType":"ExpressionStatement","src":"5667:35:33"},{"expression":{"id":8791,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":8786,"name":"s_bucket","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8712,"src":"5708:8:33","typeDescriptions":{"typeIdentifier":"t_struct$_TokenBucket_$8502_storage_ptr","typeString":"struct RateLimiter.TokenBucket storage pointer"}},"id":8788,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"5717:4:33","memberName":"rate","nodeType":"MemberAccess","referencedDeclaration":8501,"src":"5708:13:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"expression":{"id":8789,"name":"config","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8715,"src":"5724:6:33","typeDescriptions":{"typeIdentifier":"t_struct$_Config_$8509_memory_ptr","typeString":"struct RateLimiter.Config memory"}},"id":8790,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"5731:4:33","memberName":"rate","nodeType":"MemberAccess","referencedDeclaration":8508,"src":"5724:11:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"5708:27:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"id":8792,"nodeType":"ExpressionStatement","src":"5708:27:33"},{"eventCall":{"arguments":[{"id":8794,"name":"config","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8715,"src":"5761:6:33","typeDescriptions":{"typeIdentifier":"t_struct$_Config_$8509_memory_ptr","typeString":"struct RateLimiter.Config memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_struct$_Config_$8509_memory_ptr","typeString":"struct RateLimiter.Config memory"}],"id":8793,"name":"ConfigChanged","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8491,"src":"5747:13:33","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_struct$_Config_$8509_memory_ptr_$returns$__$","typeString":"function (struct RateLimiter.Config memory)"}},"id":8795,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5747:21:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":8796,"nodeType":"EmitStatement","src":"5742:26:33"}]},"documentation":{"id":8709,"nodeType":"StructuredDocumentation","src":"4955:115:33","text":"@notice Sets the rate limited config.\n @param s_bucket The token bucket\n @param config The new config"},"implemented":true,"kind":"function","modifiers":[],"name":"_setTokenBucketConfig","nameLocation":"5082:21:33","parameters":{"id":8716,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8712,"mutability":"mutable","name":"s_bucket","nameLocation":"5124:8:33","nodeType":"VariableDeclaration","scope":8798,"src":"5104:28:33","stateVariable":false,"storageLocation":"storage","typeDescriptions":{"typeIdentifier":"t_struct$_TokenBucket_$8502_storage_ptr","typeString":"struct RateLimiter.TokenBucket"},"typeName":{"id":8711,"nodeType":"UserDefinedTypeName","pathNode":{"id":8710,"name":"TokenBucket","nameLocations":["5104:11:33"],"nodeType":"IdentifierPath","referencedDeclaration":8502,"src":"5104:11:33"},"referencedDeclaration":8502,"src":"5104:11:33","typeDescriptions":{"typeIdentifier":"t_struct$_TokenBucket_$8502_storage_ptr","typeString":"struct RateLimiter.TokenBucket"}},"visibility":"internal"},{"constant":false,"id":8715,"mutability":"mutable","name":"config","nameLocation":"5148:6:33","nodeType":"VariableDeclaration","scope":8798,"src":"5134:20:33","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_struct$_Config_$8509_memory_ptr","typeString":"struct RateLimiter.Config"},"typeName":{"id":8714,"nodeType":"UserDefinedTypeName","pathNode":{"id":8713,"name":"Config","nameLocations":["5134:6:33"],"nodeType":"IdentifierPath","referencedDeclaration":8509,"src":"5134:6:33"},"referencedDeclaration":8509,"src":"5134:6:33","typeDescriptions":{"typeIdentifier":"t_struct$_Config_$8509_storage_ptr","typeString":"struct RateLimiter.Config"}},"visibility":"internal"}],"src":"5103:52:33"},"returnParameters":{"id":8717,"nodeType":"ParameterList","parameters":[],"src":"5165:0:33"},"scope":8893,"stateMutability":"nonpayable","virtual":false,"visibility":"internal"},{"id":8850,"nodeType":"FunctionDefinition","src":"5825:451:33","nodes":[],"body":{"id":8849,"nodeType":"Block","src":"5918:358:33","nodes":[],"statements":[{"condition":{"expression":{"id":8807,"name":"config","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8802,"src":"5928:6:33","typeDescriptions":{"typeIdentifier":"t_struct$_Config_$8509_memory_ptr","typeString":"struct RateLimiter.Config memory"}},"id":8808,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"5935:9:33","memberName":"isEnabled","nodeType":"MemberAccess","referencedDeclaration":8504,"src":"5928:16:33","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":8847,"nodeType":"Block","src":"6154:118:33","statements":[{"condition":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":8840,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint128","typeString":"uint128"},"id":8835,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":8832,"name":"config","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8802,"src":"6166:6:33","typeDescriptions":{"typeIdentifier":"t_struct$_Config_$8509_memory_ptr","typeString":"struct RateLimiter.Config memory"}},"id":8833,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"6173:4:33","memberName":"rate","nodeType":"MemberAccess","referencedDeclaration":8508,"src":"6166:11:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"hexValue":"30","id":8834,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"6181:1:33","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"6166:16:33","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"||","rightExpression":{"commonType":{"typeIdentifier":"t_uint128","typeString":"uint128"},"id":8839,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":8836,"name":"config","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8802,"src":"6186:6:33","typeDescriptions":{"typeIdentifier":"t_struct$_Config_$8509_memory_ptr","typeString":"struct RateLimiter.Config memory"}},"id":8837,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"6193:8:33","memberName":"capacity","nodeType":"MemberAccess","referencedDeclaration":8506,"src":"6186:15:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"hexValue":"30","id":8838,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"6205:1:33","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"6186:20:33","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"6166:40:33","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":8846,"nodeType":"IfStatement","src":"6162:104:33","trueBody":{"id":8845,"nodeType":"Block","src":"6208:58:33","statements":[{"errorCall":{"arguments":[{"id":8842,"name":"config","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8802,"src":"6250:6:33","typeDescriptions":{"typeIdentifier":"t_struct$_Config_$8509_memory_ptr","typeString":"struct RateLimiter.Config memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_struct$_Config_$8509_memory_ptr","typeString":"struct RateLimiter.Config memory"}],"id":8841,"name":"DisabledNonZeroRateLimit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8480,"src":"6225:24:33","typeDescriptions":{"typeIdentifier":"t_function_error_pure$_t_struct$_Config_$8509_memory_ptr_$returns$__$","typeString":"function (struct RateLimiter.Config memory) pure"}},"id":8843,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6225:32:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":8844,"nodeType":"RevertStatement","src":"6218:39:33"}]}}]},"id":8848,"nodeType":"IfStatement","src":"5924:348:33","trueBody":{"id":8831,"nodeType":"Block","src":"5946:202:33","statements":[{"condition":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":8818,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint128","typeString":"uint128"},"id":8813,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":8809,"name":"config","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8802,"src":"5958:6:33","typeDescriptions":{"typeIdentifier":"t_struct$_Config_$8509_memory_ptr","typeString":"struct RateLimiter.Config memory"}},"id":8810,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"5965:4:33","memberName":"rate","nodeType":"MemberAccess","referencedDeclaration":8508,"src":"5958:11:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"BinaryOperation","operator":">=","rightExpression":{"expression":{"id":8811,"name":"config","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8802,"src":"5973:6:33","typeDescriptions":{"typeIdentifier":"t_struct$_Config_$8509_memory_ptr","typeString":"struct RateLimiter.Config memory"}},"id":8812,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"5980:8:33","memberName":"capacity","nodeType":"MemberAccess","referencedDeclaration":8506,"src":"5973:15:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"5958:30:33","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"||","rightExpression":{"commonType":{"typeIdentifier":"t_uint128","typeString":"uint128"},"id":8817,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":8814,"name":"config","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8802,"src":"5992:6:33","typeDescriptions":{"typeIdentifier":"t_struct$_Config_$8509_memory_ptr","typeString":"struct RateLimiter.Config memory"}},"id":8815,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"5999:4:33","memberName":"rate","nodeType":"MemberAccess","referencedDeclaration":8508,"src":"5992:11:33","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":8816,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"6007:1:33","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"5992:16:33","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"5958:50:33","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":8824,"nodeType":"IfStatement","src":"5954:110:33","trueBody":{"id":8823,"nodeType":"Block","src":"6010:54:33","statements":[{"errorCall":{"arguments":[{"id":8820,"name":"config","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8802,"src":"6048:6:33","typeDescriptions":{"typeIdentifier":"t_struct$_Config_$8509_memory_ptr","typeString":"struct RateLimiter.Config memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_struct$_Config_$8509_memory_ptr","typeString":"struct RateLimiter.Config memory"}],"id":8819,"name":"InvalidRateLimitRate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8475,"src":"6027:20:33","typeDescriptions":{"typeIdentifier":"t_function_error_pure$_t_struct$_Config_$8509_memory_ptr_$returns$__$","typeString":"function (struct RateLimiter.Config memory) pure"}},"id":8821,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6027:28:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":8822,"nodeType":"RevertStatement","src":"6020:35:33"}]}},{"condition":{"id":8825,"name":"mustBeDisabled","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8804,"src":"6075:14:33","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":8830,"nodeType":"IfStatement","src":"6071:71:33","trueBody":{"id":8829,"nodeType":"Block","src":"6091:51:33","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":8826,"name":"RateLimitMustBeDisabled","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8482,"src":"6108:23:33","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":8827,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6108:25:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":8828,"nodeType":"RevertStatement","src":"6101:32:33"}]}}]}}]},"documentation":{"id":8799,"nodeType":"StructuredDocumentation","src":"5777:45:33","text":"@notice Validates the token bucket config"},"implemented":true,"kind":"function","modifiers":[],"name":"_validateTokenBucketConfig","nameLocation":"5834:26:33","parameters":{"id":8805,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8802,"mutability":"mutable","name":"config","nameLocation":"5875:6:33","nodeType":"VariableDeclaration","scope":8850,"src":"5861:20:33","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_struct$_Config_$8509_memory_ptr","typeString":"struct RateLimiter.Config"},"typeName":{"id":8801,"nodeType":"UserDefinedTypeName","pathNode":{"id":8800,"name":"Config","nameLocations":["5861:6:33"],"nodeType":"IdentifierPath","referencedDeclaration":8509,"src":"5861:6:33"},"referencedDeclaration":8509,"src":"5861:6:33","typeDescriptions":{"typeIdentifier":"t_struct$_Config_$8509_storage_ptr","typeString":"struct RateLimiter.Config"}},"visibility":"internal"},{"constant":false,"id":8804,"mutability":"mutable","name":"mustBeDisabled","nameLocation":"5888:14:33","nodeType":"VariableDeclaration","scope":8850,"src":"5883:19:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":8803,"name":"bool","nodeType":"ElementaryTypeName","src":"5883:4:33","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"src":"5860:43:33"},"returnParameters":{"id":8806,"nodeType":"ParameterList","parameters":[],"src":"5918:0:33"},"scope":8893,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":8874,"nodeType":"FunctionDefinition","src":"6546:201:33","nodes":[],"body":{"id":8873,"nodeType":"Block","src":"6689:58:33","nodes":[],"statements":[{"expression":{"arguments":[{"id":8865,"name":"capacity","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8853,"src":"6707:8:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":8870,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":8866,"name":"tokens","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8855,"src":"6717:6:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":8869,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":8867,"name":"timeDiff","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8857,"src":"6726:8:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":8868,"name":"rate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8859,"src":"6737:4:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6726:15:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6717:24:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":8864,"name":"_min","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8892,"src":"6702:4:33","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":8871,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6702:40:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":8863,"id":8872,"nodeType":"Return","src":"6695:47:33"}]},"documentation":{"id":8851,"nodeType":"StructuredDocumentation","src":"6280:263:33","text":"@notice Calculate refilled tokens\n @param capacity bucket capacity\n @param tokens current bucket tokens\n @param timeDiff block time difference since last refill\n @param rate bucket refill rate\n @return the value of tokens after refill"},"implemented":true,"kind":"function","modifiers":[],"name":"_calculateRefill","nameLocation":"6555:16:33","parameters":{"id":8860,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8853,"mutability":"mutable","name":"capacity","nameLocation":"6585:8:33","nodeType":"VariableDeclaration","scope":8874,"src":"6577:16:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8852,"name":"uint256","nodeType":"ElementaryTypeName","src":"6577:7:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":8855,"mutability":"mutable","name":"tokens","nameLocation":"6607:6:33","nodeType":"VariableDeclaration","scope":8874,"src":"6599:14:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8854,"name":"uint256","nodeType":"ElementaryTypeName","src":"6599:7:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":8857,"mutability":"mutable","name":"timeDiff","nameLocation":"6627:8:33","nodeType":"VariableDeclaration","scope":8874,"src":"6619:16:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8856,"name":"uint256","nodeType":"ElementaryTypeName","src":"6619:7:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":8859,"mutability":"mutable","name":"rate","nameLocation":"6649:4:33","nodeType":"VariableDeclaration","scope":8874,"src":"6641:12:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8858,"name":"uint256","nodeType":"ElementaryTypeName","src":"6641:7:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"6571:86:33"},"returnParameters":{"id":8863,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8862,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":8874,"src":"6680:7:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8861,"name":"uint256","nodeType":"ElementaryTypeName","src":"6680:7:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"6679:9:33"},"scope":8893,"stateMutability":"pure","virtual":false,"visibility":"private"},{"id":8892,"nodeType":"FunctionDefinition","src":"6875:99:33","nodes":[],"body":{"id":8891,"nodeType":"Block","src":"6943:31:33","nodes":[],"statements":[{"expression":{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":8886,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":8884,"name":"a","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8877,"src":"6956:1:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"id":8885,"name":"b","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8879,"src":"6960:1:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6956:5:33","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseExpression":{"id":8888,"name":"b","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8879,"src":"6968:1:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":8889,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"Conditional","src":"6956:13:33","trueExpression":{"id":8887,"name":"a","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8877,"src":"6964:1:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":8883,"id":8890,"nodeType":"Return","src":"6949:20:33"}]},"documentation":{"id":8875,"nodeType":"StructuredDocumentation","src":"6751:121:33","text":"@notice Return the smallest of two integers\n @param a first int\n @param b second int\n @return smallest"},"implemented":true,"kind":"function","modifiers":[],"name":"_min","nameLocation":"6884:4:33","parameters":{"id":8880,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8877,"mutability":"mutable","name":"a","nameLocation":"6897:1:33","nodeType":"VariableDeclaration","scope":8892,"src":"6889:9:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8876,"name":"uint256","nodeType":"ElementaryTypeName","src":"6889:7:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":8879,"mutability":"mutable","name":"b","nameLocation":"6908:1:33","nodeType":"VariableDeclaration","scope":8892,"src":"6900:9:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8878,"name":"uint256","nodeType":"ElementaryTypeName","src":"6900:7:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"6888:22:33"},"returnParameters":{"id":8883,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8882,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":8892,"src":"6934:7:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8881,"name":"uint256","nodeType":"ElementaryTypeName","src":"6934:7:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"6933:9:33"},"scope":8893,"stateMutability":"pure","virtual":false,"visibility":"internal"}],"abstract":false,"baseContracts":[],"canonicalName":"RateLimiter","contractDependencies":[],"contractKind":"library","documentation":{"id":8438,"nodeType":"StructuredDocumentation","src":"62:511:33","text":"@notice Implements Token Bucket rate limiting.\n @dev uint128 is safe for rate limiter state.\n For USD value rate limiting, it can adequately store USD value in 18 decimals.\n For ERC20 token amount rate limiting, all tokens that will be listed will have at most\n a supply of uint128.max tokens, and it will therefore not overflow the bucket.\n In exceptional scenarios where tokens consumed may be larger than uint128,\n e.g. compromised issuer, an enabled RateLimiter will check and revert."},"fullyImplemented":true,"linearizedBaseContracts":[8893],"name":"RateLimiter","nameLocation":"581:11:33","scope":8894,"usedErrors":[8440,8442,8450,8458,8464,8470,8475,8480,8482],"usedEvents":[8486,8491]}],"license":"BUSL-1.1"},"id":33}