## Medium

### [M-1] Using ERC721::\_mint() can be dangerous

## Summary

This report outlines a critical finding identified during the security audit of the smart contract codebase. The finding pertains to the use of the ERC721::\_mint() function, which poses a potential risk to the contract's integrity and the safety of the tokens minted using this method.

## Vulnerability Details

- **Location**: src/TSwapPool.sol, Line: 193
- **Issue**: The smart contract utilizes the ERC721::\_mint() function to mint ERC721 tokens.
- **Description**: The ERC721::\_mint() function is used to mint tokens directly to addresses. However, this method does not check whether the receiving address is capable of handling ERC721 tokens, which could lead to tokens being locked or lost if sent to contracts not designed to interact with ERC721 tokens.

## Impact

The use of ERC721::\_mint() without validating the recipient's ability to handle ERC721 tokens can lead to several adverse outcomes, including but not limited to:

- Loss of tokens: Tokens might be permanently locked in contracts that cannot interact with ERC721 tokens.
- Reduced trust: Users and stakeholders might lose trust in the platform's ability to securely manage assets.
- Operational disruption: The need to address and rectify such issues could lead to operational delays and additional costs.

## Tools Used

The vulnerability was identified through manual code review and analysis.

## Recommendations

- **Immediate Action**: Replace all instances of ERC721::\_mint() with ERC721::\_safeMint() in the smart contract code. The \_safeMint() function includes an additional check to ensure that the recipient address can properly interact with ERC721 tokens, thereby mitigating the risk identified.

### [M-1] PUSH0 is not supported by all chains

## Summary

This report addresses a low-severity issue identified in the smart contract codebase, specifically related to the compatibility of the generated bytecode with various Ethereum Virtual Machine (EVM) versions. The core of the issue is the use of Solidity compiler version 0.8.20, which defaults to the Shanghai EVM version, incorporating the PUSH0 opcode in the bytecode.

## Vulnerability Details

- **Affected Files**:
  - `src/PoolFactory.sol` at [Line: 15](src/PoolFactory.sol#L15)
  - `src/TSwapPool.sol` at [Line: 15](src/TSwapPool.sol#L15)
- **Description**: The Solidity compiler version 0.8.20 targets the Shanghai EVM version by default, resulting in the inclusion of the PUSH0 opcode in the compiled bytecode. This opcode may not be supported on all blockchain networks, especially on Layer 2 (L2) chains or those that have not updated to the Shanghai version, potentially leading to deployment failures.

## Impact

The use of the PUSH0 opcode in smart contracts compiled with Solidity 0.8.20 without specifying an appropriate EVM version for the target chain could result in deployment issues on networks that do not support this opcode. This limitation restricts the deployment and functionality of the smart contracts on various blockchain platforms, potentially affecting their interoperability and reach.

## Tools Used

The issue was identified through manual review of the smart contract code and the Solidity compiler documentation.

## Recommendations

- **Immediate Action**: Developers should explicitly specify the target EVM version when compiling smart contracts with Solidity 0.8.20, ensuring compatibility with the intended deployment blockchain network.
